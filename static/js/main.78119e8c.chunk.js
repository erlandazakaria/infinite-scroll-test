(this["webpackJsonpinfinite-scroll"]=this["webpackJsonpinfinite-scroll"]||[]).push([[0],{44:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(20),i=n.n(a),o=(n(44),n(3)),s=n(10),l=n(9),d=n(1),u=Object(c.createContext)();function j(e,t){switch(t.type){case"SET_MODAL":return t.payload;case"UNSET_MODAL":return false;default:throw new Error("Unhandled type: ".concat(t.type))}}function b(e){var t=Object(c.useReducer)(j,false),n=Object(l.a)(t,2),r=n[0],a=n[1],i=Object(c.useMemo)((function(){return[r,a]}),[r]);return Object(d.jsx)(u.Provider,Object(s.a)({value:i},e))}function h(){var e=Object(c.useContext)(u);if(!e)throw new Error("useModal must be used within a ModalProvider");var t=Object(l.a)(e,2),n=t[0],r=t[1];return{modal:n,setModal:function(e){r({type:"SET_MODAL",payload:e})},closeModal:function(){r({type:"UNSET_MODAL"})}}}var O=function(){return Object(d.jsx)("h1",{style:{textAlign:"center"},children:"Welcome Movie Lover"})},f=function(e){var t=e.data,n=e.handleClick,c=void 0===n?function(){}:n;return Object(d.jsx)("div",{onClick:c,style:p.overlay,children:Object(d.jsx)("div",{style:p.container,children:Object(d.jsx)("div",{style:p.wrapper,children:Object(d.jsx)("img",{alt:"modal-popup",src:t,height:300,width:600,style:{objectFit:"contain"}})})})})},p={overlay:{position:"absolute",zIndex:999998,width:"100vw",height:"100vh",backgroundColor:"rgba(0,0,0,0.5)"},container:{position:"absolute",zIndex:999999,width:"100vw",height:"100vh"},wrapper:{display:"flex",width:"100vw",height:"100vh",justifyContent:"center",alignItems:"center"}},x=n(16),g=n(12),v=n.n(g),y=n(27),w=n(22),m=n(23),P=n.n(m),k="GET_LIST",C="CLEANING",L="MOVIE_LIST_LOADING",M=function(e){return{type:L,payload:e}},T=function(e,t){return function(){var n=Object(w.a)(v.a.mark((function n(c,r){var a,i,o,s,l,d,u,j,b;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=r().movies,i=a.data,o=a.currentPage,s=a.totalPage,l=a.keyword,e!==o||t!==l){n.next=4;break}return c({type:k,payload:{data:i,currentPage:o,totalPage:s,keyword:l}}),n.abrupt("return");case 4:return n.next=6,P.a.get("https://www.omdbapi.com/",{params:{apikey:"d6803987",s:t,page:e}});case 6:"False"!==(d=n.sent).data.Response?(u=d.data,j=u.Search,b=u.totalResults,c({type:k,payload:{data:t!==l?j:[].concat(Object(y.a)(i),Object(y.a)(j)),currentPage:t!==l?1:e,totalPage:b/10,keyword:t}})):c({type:k,payload:null}),c(M(!1));case 9:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},I=function(e){var t=e.data,n=Object(o.f)(),c=h().setModal;return Object(d.jsxs)("div",{style:S.container,children:[Object(d.jsx)("div",{children:Object(d.jsx)("img",{onClick:function(){return c(t.Poster)},alt:t.Title,src:t.Poster,width:100,height:150,style:{objectFit:"contain"}})}),Object(d.jsxs)("div",{style:S.wrapper,children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:t.Title}),Object(d.jsx)("div",{children:"Year: ".concat(t.Year)}),Object(d.jsx)("div",{children:"Type: ".concat(t.Type)})]}),Object(d.jsx)("div",{style:{alignSelf:"flex-end"},onClick:function(){return n.push("/movie-detail/".concat(t.imdbID))},children:"Detail"})]})]},t.imdbID)},S={container:{display:"flex",flexDirection:"row",width:500,height:150,marginBottom:5,border:"1px solid grey",borderRadius:5},wrapper:{display:"flex",flexDirection:"column",justifyContent:"space-between",boxSizing:"border-box",width:"100%",height:150,padding:10}},E=function(){var e=Object(x.c)((function(e){return e.movies})),t=Object(x.b)(),n=Object(c.useState)(1),r=Object(l.a)(n,2),a=r[0],i=r[1],o=Object(c.useState)(""),s=Object(l.a)(o,2),u=s[0],j=s[1],b=Object(c.useRef)(),h=Object(c.useRef)();return Object(c.useEffect)((function(){e.isLoading||(h.current&&h.current.disconnect(),h.current=new IntersectionObserver((function(t){t[0].isIntersecting&&a<e.totalPage&&i((function(e){return e+1}))}),{root:null,rootMargin:"20px",threshold:1}),h.current.observe(b.current))}),[e.isLoading]),Object(c.useEffect)((function(){t(M(!0)),t(T(a,u))}),[a]),Object(c.useEffect)((function(){return function(){return t({type:C})}}),[]),Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{style:D.wrapper,children:[Object(d.jsx)("input",{value:u,onChange:function(e){return j(e.target.value)}}),Object(d.jsx)("button",{onClick:function(){t(M(!0)),t(T(1,u))},style:{marginLeft:5},children:"Search"})]}),e.data.map((function(e){return Object(d.jsx)(I,{data:e},"element-".concat(e.imdbID))})),Object(d.jsx)("div",{ref:b,style:{marginBottom:20},children:a<e.totalPage&&"Loading More"})]})},D={wrapper:{display:"flex",justifyContent:"center",marginBottom:20}},R=function(){var e=Object(o.g)().id,t=Object(c.useState)(null),n=Object(l.a)(t,2),r=n[0],a=n[1],i=h().setModal,s=function(){var t=Object(w.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.a.get("https://www.omdbapi.com/",{params:{apikey:"d6803987",i:e}});case 2:"True"===(n=t.sent).data.Response&&a(n.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){s()}),[]),r?Object(d.jsxs)("div",{style:A.container,children:[Object(d.jsx)("h2",{children:r.Title}),Object(d.jsx)("img",{onClick:function(){return i(r.Poster)},alt:r.Title,src:r.Poster,width:100,height:150,style:{objectFit:"contain"}}),Object(d.jsx)("h3",{children:r.Ratings&&r.Ratings[0]&&r.Ratings[0].Value}),Object.keys(r).map((function(e,t){return"Title"!==e&&"Ratings"!==e&&"Plot"!==e&&"Poster"!==e?Object(d.jsxs)("div",{children:[e," : ",r[e]]},e):null})),Object(d.jsx)("h4",{children:r.Plot&&r.Plot})]}):Object(d.jsx)("div",{children:"Loading ..."})},A={container:{textAlign:"center",maxWidth:500}},F=function(){var e=h(),t=e.modal,n=e.closeModal;return Object(d.jsxs)("div",{className:"container",children:[t?Object(d.jsx)(f,{data:t,handleClick:n}):null,Object(d.jsx)(O,{}),Object(d.jsx)("div",{className:"content",children:Object(d.jsxs)(o.c,{children:[Object(d.jsx)(o.a,{exact:!0,path:"/infinite-scroll-test/",children:Object(d.jsx)(E,{})}),Object(d.jsx)(o.a,{path:"/infinite-scroll-test/movie-detail/:id",children:Object(d.jsx)(R,{})})]})})]})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,72)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},_=n(13),B=n(17),z=n(39),G={data:[],currentPage:1,totalPage:1,keyword:"",isLoading:!1},U=Object(B.b)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case k:return c?Object(s.a)(Object(s.a)(Object(s.a)({},e),c),{},{totalPage:parseInt(c.totalPage,10)}):G;case L:return Object(s.a)(Object(s.a)({},e),{},{isLoading:c});case C:return G;default:return e}}}),J=Object(B.c)(U,Object(B.a)(z.a));i.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(x.a,{store:J,children:Object(d.jsx)(_.a,{children:Object(d.jsx)(b,{children:Object(d.jsx)(F,{})})})})}),document.getElementById("root")),N()}},[[71,1,2]]]);
//# sourceMappingURL=main.78119e8c.chunk.js.map